<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1E3A8A">
    <title>Mupfumi - Financial Literacy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1E3A8A 0%, #3B82F6 50%, #06B6D4 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            padding: 16px;
            min-height: 100vh;
        }

        .screen {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Welcome Screen */
        .welcome-header {
            text-align: center;
            padding: 40px 0 30px;
        }

        .welcome-header .logo {
            font-size: 72px;
            margin-bottom: 12px;
        }

        .welcome-header h1 {
            color: white;
            font-size: 42px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .welcome-header p {
            color: rgba(255,255,255,0.95);
            font-size: 16px;
            font-weight: 500;
        }

        .info-card {
            background: rgba(255,255,255,0.15);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            backdrop-filter: blur(10px);
        }

        .info-card-header {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .info-card-icon {
            font-size: 28px;
            flex-shrink: 0;
        }

        .info-card-content h3 {
            color: white;
            font-size: 15px;
            margin-bottom: 4px;
        }

        .info-card-content p {
            color: rgba(255,255,255,0.9);
            font-size: 13px;
            line-height: 18px;
        }

        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 16px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-bottom: 12px;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background: #10B981;
            color: white;
        }

        .btn-outline {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        /* Navigation Header */
        .nav-header {
            background: #1E3A8A;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-header .back-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
        }

        .nav-header h2 {
            color: white;
            font-size: 20px;
            flex: 1;
        }

        .content-area {
            background: white;
            min-height: calc(100vh - 64px);
            padding: 20px;
        }

        /* Mode Selection */
        .mode-grid {
            display: grid;
            gap: 16px;
            padding: 20px 0;
        }

        .mode-card {
            background: linear-gradient(135deg, #3B82F6, #06B6D4);
            border-radius: 20px;
            padding: 24px;
            cursor: pointer;
            transition: transform 0.2s;
            color: white;
            text-align: center;
        }

        .mode-card:active {
            transform: scale(0.98);
        }

        .mode-card .icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        .mode-card h3 {
            font-size: 22px;
            margin-bottom: 8px;
        }

        .mode-card p {
            font-size: 14px;
            opacity: 0.95;
            line-height: 1.4;
        }

        /* Category Selection */
        .category-card {
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .category-card:active {
            transform: scale(0.98);
            border-color: #3B82F6;
        }

        .category-card .icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .category-card h3 {
            color: #1E3A8A;
            font-size: 18px;
            margin-bottom: 4px;
        }

        .category-card p {
            color: #6B7280;
            font-size: 13px;
        }

        /* Game Screen */
        .game-header {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .game-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #1E3A8A;
        }

        .stat-label {
            font-size: 12px;
            color: #6B7280;
            margin-top: 4px;
        }

        .timer {
            background: linear-gradient(135deg, #EF4444, #F59E0B);
            color: white;
            padding: 12px;
            border-radius: 12px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }

        .question-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .question-number {
            color: #3B82F6;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .question-text {
            color: #1E3A8A;
            font-size: 18px;
            font-weight: 600;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .answer-option {
            background: #F3F4F6;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .answer-option:active {
            transform: scale(0.98);
        }

        .answer-option.selected {
            background: #DBEAFE;
            border-color: #3B82F6;
        }

        .answer-option.correct {
            background: #D1FAE5;
            border-color: #10B981;
        }

        .answer-option.wrong {
            background: #FEE2E2;
            border-color: #EF4444;
        }

        .game-controls {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .game-controls .btn {
            flex: 1;
            margin: 0;
        }

        .btn-secondary {
            background: #6B7280;
            color: white;
        }

        .btn-success {
            background: #10B981;
            color: white;
        }

        .btn-danger {
            background: #EF4444;
            color: white;
        }

        /* Results */
        .results-card {
            background: white;
            border-radius: 20px;
            padding: 24px;
            text-align: center;
            margin-bottom: 20px;
        }

        .results-card .score-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }

        .results-card h3 {
            color: #1E3A8A;
            font-size: 24px;
            margin-bottom: 8px;
        }

        .results-card .score {
            font-size: 48px;
            font-weight: bold;
            color: #3B82F6;
            margin-bottom: 16px;
        }

        .chart-container {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .chart {
            height: 200px;
            position: relative;
            display: flex;
            align-items: flex-end;
            gap: 20px;
            justify-content: center;
        }

        .bar {
            flex: 1;
            max-width: 80px;
            background: linear-gradient(to top, #3B82F6, #06B6D4);
            border-radius: 8px 8px 0 0;
            position: relative;
            transition: height 0.5s ease;
        }

        .bar-label {
            position: absolute;
            bottom: -30px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 12px;
            color: #6B7280;
            font-weight: 600;
        }

        .bar-value {
            position: absolute;
            top: -30px;
            left: 0;
            right: 0;
            text-align: center;
            font-weight: bold;
            color: #1E3A8A;
        }

        .recommendation {
            background: linear-gradient(135deg, #FEF3C7, #FDE68A);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .recommendation h4 {
            color: #92400E;
            font-size: 18px;
            margin-bottom: 8px;
        }

        .recommendation p {
            color: #78350F;
            line-height: 1.5;
        }

        /* Learning Content */
        .learning-section {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .learning-section h3 {
            color: #1E3A8A;
            font-size: 22px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .learning-section p {
            color: #374151;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .learning-section ul {
            margin-left: 20px;
            margin-bottom: 12px;
        }

        .learning-section li {
            color: #374151;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .example-box {
            background: #F0F9FF;
            border-left: 4px solid #3B82F6;
            padding: 16px;
            margin: 16px 0;
            border-radius: 8px;
        }

        .example-box h4 {
            color: #1E40AF;
            font-size: 16px;
            margin-bottom: 8px;
        }

        .example-box p {
            color: #1E40AF;
            font-size: 14px;
        }

        /* Chat Interface */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: calc(100vh - 120px);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .chat-message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 16px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-message.bot {
            align-self: flex-start;
            background: #F3F4F6;
            color: #1F2937;
        }

        .chat-message.user {
            align-self: flex-end;
            background: linear-gradient(135deg, #3B82F6, #06B6D4);
            color: white;
        }

        .chat-message .prompt {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 6px;
            font-style: italic;
        }

        .chat-input-area {
            padding: 16px;
            background: white;
            border-top: 1px solid #E5E7EB;
        }

        .chat-options {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 12px;
        }

        .chat-option {
            padding: 8px 16px;
            background: #3B82F6;
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .chat-option:active {
            transform: scale(0.95);
        }

        .chat-input {
            display: flex;
            gap: 8px;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #E5E7EB;
            border-radius: 24px;
            font-size: 16px;
            outline: none;
        }

        .chat-input button {
            padding: 12px 20px;
            background: #3B82F6;
            color: white;
            border: none;
            border-radius: 24px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
        }

        /* Utilities */
        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>

    <!-- Welcome Screen -->
    <div id="welcomeScreen" class="screen active">
        <div class="container">
            <div class="welcome-header">
                <div class="logo">üí∞</div>
                <h1>Mupfumi</h1>
                <p>Financial Literacy for Zimbabwean Youth</p>
            </div>

            <div class="info-card">
                <div class="info-card-header">
                    <div class="info-card-icon">üéØ</div>
                    <div class="info-card-content">
                        <h3>Our Mission</h3>
                        <p>Empowering Zimbabwean youth with essential financial knowledge and tools to navigate their unique economic landscape</p>
                    </div>
                </div>
            </div>

            <div class="info-card">
                <div class="info-card-header">
                    <div class="info-card-icon">üéÆ</div>
                    <div class="info-card-content">
                        <h3>Gamified Learning</h3>
                        <p>Interactive lessons with quizzes, challenges, and rewards to make financial education engaging and fun</p>
                    </div>
                </div>
            </div>

            <div class="info-card">
                <div class="info-card-header">
                    <div class="info-card-icon">üáøüáº</div>
                    <div class="info-card-content">
                        <h3>Localized Content</h3>
                        <p>Tailored specifically for Zimbabwe's economic context, currency, and financial systems</p>
                    </div>
                </div>
            </div>

            <button class="btn btn-primary" onclick="showScreen('modeScreen')">
                <span>‚ñ∂</span>
                Start Learning
            </button>

            <button class="btn btn-outline" onclick="showScreen('aboutScreen')">
                <span>‚ÑπÔ∏è</span>
                About Mupfumi
            </button>
        </div>
    </div>

    <!-- Mode Selection Screen -->
    <div id="modeScreen" class="screen">
        <div class="nav-header">
            <button class="back-btn" onclick="showScreen('welcomeScreen')">‚Üê</button>
            <h2>Choose Learning Mode</h2>
        </div>
        <div class="content-area">
            <div class="mode-grid">
                <div class="mode-card" onclick="showScreen('categoryScreen')">
                    <div class="icon">üéÆ</div>
                    <h3>Play & Learn</h3>
                    <p>Test your knowledge with fun quizzes and challenges</p>
                </div>

                <div class="mode-card" onclick="showScreen('learningScreen')">
                    <div class="icon">üìö</div>
                    <h3>Read & Study</h3>
                    <p>Explore comprehensive financial literacy content</p>
                </div>

                <div class="mode-card" onclick="initChat()">
                    <div class="icon">üí¨</div>
                    <h3>Chat & Discuss</h3>
                    <p>Have a guided conversation about finances</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Category Selection Screen -->
    <div id="categoryScreen" class="screen">
        <div class="nav-header">
            <button class="back-btn" onclick="showScreen('modeScreen')">‚Üê</button>
            <h2>Select Game Category</h2>
        </div>
        <div class="content-area">
            <div class="category-card" onclick="startGame('mathematics')">
                <div class="icon">üî¢</div>
                <h3>Mathematics & Calculations</h3>
                <p>Interest rates, budgets, and financial calculations</p>
            </div>

            <div class="category-card" onclick="startGame('current-affairs')">
                <div class="icon">üì∞</div>
                <h3>Current Affairs</h3>
                <p>Zimbabwe's economy, policies, and financial news</p>
            </div>

            <div class="category-card" onclick="startGame('historical')">
                <div class="icon">üìú</div>
                <h3>Economic History</h3>
                <p>Zimbabwe's financial journey and lessons learned</p>
            </div>

            <div class="category-card" onclick="startGame('technology')">
                <div class="icon">üíª</div>
                <h3>Financial Technology</h3>
                <p>Mobile money, digital banking, and fintech</p>
            </div>

            <div class="category-card" onclick="startGame('literacy')">
                <div class="icon">üìñ</div>
                <h3>Financial Literacy</h3>
                <p>Basic concepts, terminology, and principles</p>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen">
        <div class="nav-header">
            <button class="back-btn" onclick="confirmQuitGame()">‚Üê</button>
            <h2 id="gameTitle">Quiz Game</h2>
        </div>
        <div class="content-area">
            <div class="game-header">
                <div class="game-stats">
                    <div class="stat">
                        <div class="stat-value" id="currentQ">1</div>
                        <div class="stat-label">Question</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="totalQ">10</div>
                        <div class="stat-label">Total</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="answered">0</div>
                        <div class="stat-label">Answered</div>
                    </div>
                </div>
                <div class="timer" id="timer">‚è±Ô∏è Time: 2:00</div>
            </div>

            <div class="question-card">
                <div class="question-number" id="questionNum">Question 1 of 10</div>
                <div class="question-text" id="questionText">Loading question...</div>
                <div id="answersContainer"></div>
            </div>

            <div class="game-controls">
                <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn">Next ‚Üí</button>
                <button class="btn btn-danger" onclick="finishGame()">Finish</button>
            </div>
        </div>
    </div>

    <!-- Results Screen -->
    <div id="resultsScreen" class="screen">
        <div class="nav-header">
            <button class="back-btn" onclick="showScreen('categoryScreen')">‚Üê</button>
            <h2>Game Results</h2>
        </div>
        <div class="content-area">
            <div class="results-card">
                <div class="score-icon" id="resultIcon">üéâ</div>
                <h3 id="resultTitle">Great Job!</h3>
                <div class="score" id="finalScore">0/10</div>
                <p id="resultMessage">You've completed the quiz!</p>
            </div>

            <div class="chart-container">
                <h3 style="color: #1E3A8A; margin-bottom: 16px; text-align: center;">Performance Breakdown</h3>
                <div class="chart" id="chart"></div>
            </div>

            <div class="recommendation" id="recommendation">
                <h4>üí° Recommendation</h4>
                <p id="recommendationText">Keep learning to improve your financial knowledge!</p>
            </div>

            <button class="btn btn-primary" onclick="showScreen('categoryScreen')">Play Again</button>
            <button class="btn btn-outline" onclick="showScreen('modeScreen')" style="color: #1E3A8A; border-color: #1E3A8A;">Back to Menu</button>
        </div>
    </div>

    <!-- Learning Screen -->
    <div id="learningScreen" class="screen">
        <div class="nav-header">
            <button class="back-btn" onclick="showScreen('modeScreen')">‚Üê</button>
            <h2>Financial Literacy Guide</h2>
        </div>
        <div class="content-area" style="background: #F9FAFB;">
            <div class="learning-section">
                <h3>üí∞ Understanding Money Management</h3>
                <p>Money management is the foundation of financial success. In Zimbabwe, where economic conditions can be challenging, proper money management becomes even more crucial.</p>
                
                <p><strong>Key Principles:</strong></p>
                <ul>
                    <li><strong>Budgeting:</strong> Track your income and expenses to understand where your money goes</li>
                    <li><strong>Saving:</strong> Set aside money regularly, even small amounts add up over time</li>
                    <li><strong>Prioritizing Needs:</strong> Distinguish between wants and needs to make smart spending decisions</li>
                </ul>

                <div class="example-box">
                    <h4>üéØ Example: Creating a Simple Budget</h4>
                    <p><strong>Monthly Income:</strong> USD 200<br>
                    <strong>Expenses:</strong><br>
                    - Food: USD 80 (40%)<br>
                    - Transport: USD 40 (20%)<br>
                    - Airtime: USD 20 (10%)<br>
                    - Savings: USD 30 (15%)<br>
                    - Other: USD 30 (15%)</p>
                    <p>This 50-30-20 approach (50% needs, 30% wants, 20% savings) helps maintain financial balance.</p>
                </div>
            </div>

            <div class="learning-section">
                <h3>üè¶ Banking and Savings in Zimbabwe</h3>
                <p>Zimbabwe's banking system has evolved significantly. Understanding how to use banking services effectively can help you manage money better and access financial opportunities.</p>
                
                <p><strong>Types of Bank Accounts:</strong></p>
                <ul>
                    <li><strong>Savings Accounts:</strong> Earn interest on your deposits, ideal for emergency funds</li>
                    <li><strong>Current Accounts:</strong> For daily transactions with debit cards and mobile banking</li>
                    <li><strong>Mobile Money Accounts:</strong> EcoCash, OneMoney - convenient for transactions without a bank</li>
                </ul>

                <div class="example-box">
                    <h4>üéØ Example: Building an Emergency Fund</h4>
                    <p>If you save USD 10 per month in a savings account with 5% annual interest:<br>
                    <strong>After 1 year:</strong> USD 120 + USD 3.30 interest = USD 123.30<br>
                    <strong>After 3 years:</strong> USD 360 + USD 28.40 interest = USD 388.40</p>
                    <p>Starting early allows your money to grow through compound interest!</p>
                </div>
            </div>

            <div class="learning-section">
                <h3>üì± Mobile Money and Digital Payments</h3>
                <p>Mobile money has revolutionized finance in Zimbabwe. Services like EcoCash, OneMoney, and Innbucks make it easier to send money, pay bills, and save without visiting a bank.</p>
                
                <p><strong>Benefits of Mobile Money:</strong></p>
                <ul>
                    <li>Instant money transfers to family and friends</li>
                    <li>Pay bills directly from your phone</li>
                    <li>Access to loans and savings products</li>
                    <li>Safer than carrying cash</li>
                    <li>Available 24/7 without visiting a bank branch</li>
                </ul>

                <p><strong>Safety Tips:</strong></p>
                <ul>
                    <li>Never share your PIN with anyone</li>
                    <li>Verify recipient details before sending money</li>
                    <li>Keep your phone secure with a password</li>
                    <li>Monitor your transaction history regularly</li>
                </ul>
            </div>

            <div class="learning-section">
                <h3>üí≥ Understanding Credit and Debt</h3>
                <p>Credit can be a useful tool, but it must be managed carefully. In Zimbabwe, understanding the cost of borrowing is essential to avoid financial distress.</p>
                
                <p><strong>Types of Credit:</strong></p>
                <ul>
                    <li><strong>Personal Loans:</strong> Borrowed from banks with fixed repayment terms</li>
                    <li><strong>Mobile Loans:</strong> Quick loans via mobile money platforms</li>
                    <li><strong>Microfinance:</strong> Small loans from microfinance institutions</li>
                    <li><strong>Informal Credit:</strong> Borrowing from friends, family, or informal lenders</li>
                </ul>

                <div class="example-box">
                    <h4>üéØ Example: Understanding Loan Costs</h4>
                    <p><strong>Loan Amount:</strong> USD 100<br>
                    <strong>Interest Rate:</strong> 10% per month<br>
                    <strong>Repayment Period:</strong> 3 months</p>
                    <p><strong>Total Interest:</strong> USD 30<br>
                    <strong>Total Repayment:</strong> USD 130<br>
                    <strong>Monthly Payment:</strong> USD 43.33</p>
                    <p>Always calculate the total cost before borrowing!</p>
                </div>

                <p><strong>Warning Signs of Too Much Debt:</strong></p>
                <ul>
                    <li>Using new loans to pay old ones</li>
                    <li>Unable to save any money</li>
                    <li>Constant worry about money</li>
                    <li>Missing loan payments</li>
                </ul>
            </div>

            <div class="learning-section">
                <h3>üìà Investment Basics</h3>
                <p>Investing means putting your money to work to generate more money over time. Even with small amounts, young Zimbabweans can start building wealth.</p>
                
                <p><strong>Investment Options in Zimbabwe:</strong></p>
                <ul>
                    <li><strong>Savings Accounts:</strong> Low risk, guaranteed returns through interest</li>
                    <li><strong>Treasury Bills:</strong> Government securities with fixed returns</li>
                    <li><strong>Stock Market (ZSE):</strong> Buy shares in Zimbabwean companies</li>
                    <li><strong>Small Business:</strong> Start your own income-generating venture</li>
                    <li><strong>Skills Development:</strong> Invest in yourself through education and training</li>
                </ul>

                <div class="example-box">
                    <h4>üéØ Example: The Power of Compound Growth</h4>
                    <p>Investing USD 50 monthly with 12% annual return:<br>
                    <strong>After 5 years:</strong> USD 4,092<br>
                    <strong>After 10 years:</strong> USD 11,503<br>
                    <strong>After 20 years:</strong> USD 49,460</p>
                    <p>Time is your greatest asset when investing!</p>
                </div>
            </div>

            <div class="learning-section">
                <h3>üéØ Setting Financial Goals</h3>
                <p>Clear financial goals give direction to your money management. Whether saving for education, starting a business, or buying assets, goals keep you motivated.</p>
                
                <p><strong>SMART Financial Goals:</strong></p>
                <ul>
                    <li><strong>Specific:</strong> "Save USD 500" not "Save money"</li>
                    <li><strong>Measurable:</strong> Track your progress regularly</li>
                    <li><strong>Achievable:</strong> Set realistic targets based on your income</li>
                    <li><strong>Relevant:</strong> Align with your priorities and values</li>
                    <li><strong>Time-bound:</strong> Set a deadline to create urgency</li>
                </ul>

                <div class="example-box">
                    <h4>üéØ Example: Short-term vs Long-term Goals</h4>
                    <p><strong>Short-term (1-2 years):</strong><br>
                    - Build USD 300 emergency fund<br>
                    - Buy a smartphone for work<br>
                    - Complete a skills course</p>
                    <p><strong>Long-term (5+ years):</strong><br>
                    - Save for university education<br>
                    - Start a business<br>
                    - Buy land or property</p>
                </div>
            </div>

            <button class="btn btn-primary" onclick="showScreen('modeScreen')" style="margin-top: 20px;">Back to Menu</button>
        </div>
    </div>

    <!-- Chat Screen -->
    <div id="chatScreen" class="screen">
        <div class="nav-header">
            <button class="back-btn" onclick="showScreen('modeScreen')">‚Üê</button>
            <h2>Financial Chat</h2>
        </div>
        <div class="chat-container">
            <div class="chat-messages" id="chatMessages"></div>
            <div class="chat-input-area">
                <div class="chat-options" id="chatOptions"></div>
                <div class="chat-input" id="chatInputContainer" style="display: none;">
                    <input type="text" id="chatInput" placeholder="Type your message...">
                    <button onclick="sendChatMessage()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <!-- About Screen -->
    <div id="aboutScreen" class="screen">
        <div class="nav-header">
            <button class="back-btn" onclick="showScreen('welcomeScreen')">‚Üê</button>
            <h2>About Mupfumi</h2>
        </div>
        <div class="content-area" style="background: linear-gradient(135deg, #1E3A8A 0%, #3B82F6 100%); color: white;">
            <div style="text-align: center; margin-bottom: 24px;">
                <div style="font-size: 48px; margin-bottom: 8px;">üí∞</div>
                <h1 style="font-size: 32px; margin-bottom: 8px;">Mupfumi</h1>
                <p style="opacity: 0.95;">Financial Literacy for Zimbabwean Youth</p>
            </div>

            <div class="info-card">
                <h3 style="margin-bottom: 8px;">üéì Academic Research</h3>
                <p>This dissertation is submitted to Lupane State University in partial fulfilment of the requirements for Bachelor of Science Honours Degree in Business Computing.</p>
            </div>

            <div class="info-card">
                <h3 style="margin-bottom: 8px;">üë®‚Äçüéì Developed By</h3>
                <p>Lawrence Valentine Mhlanga<br>Student Number: L0225355C</p>
            </div>

            <div class="info-card">
                <h3 style="margin-bottom: 8px;">üë®‚Äçüè´ Supervised By</h3>
                <p>Mr. B. Tangwanda<br>Lupane State University</p>
            </div>

            <div class="info-card">
                <h3 style="margin-bottom: 8px;">üéØ Research Objectives</h3>
                <p>‚Ä¢ Design and develop core application prototype for Android<br>
                ‚Ä¢ Localize content for Zimbabwean context<br>
                ‚Ä¢ Integrate gamification for enhanced user engagement<br>
                ‚Ä¢ Conduct user-centric evaluation and testing<br>
                ‚Ä¢ Assess feasibility and impact on financial literacy</p>
            </div>

            <div class="info-card">
                <h3 style="margin-bottom: 8px;">üìû Contact</h3>
                <p>üì± Phone: +263 78 770 2386<br>
                üåê Website: www.droomdazlean.com/mupfumi<br>
                üèõÔ∏è Institution: Lupane State University</p>
            </div>

            <div style="text-align: center; margin-top: 24px; opacity: 0.7; font-size: 13px;">
                <p>¬© 2026 Mupfumi Project<br>Empowering Zimbabwe's Financial Future</p>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            category: '',
            questions: [],
            currentIndex: 0,
            answers: {},
            startTime: null,
            timeLimit: 120,
            timerInterval: null
        };

        // Chat State
        let chatState = {
            step: 0,
            history: []
        };

        // Question Banks
        const questionBanks = {
            mathematics: [
                {
                    q: "If you save USD 20 every month for a year at 5% annual interest, approximately how much will you have?",
                    a: ["USD 240", "USD 252", "USD 246", "USD 260"],
                    c: 2
                },
                {
                    q: "A mobile money transfer of USD 50 has a 2% fee. How much is the fee?",
                    a: ["USD 0.50", "USD 1.00", "USD 1.50", "USD 2.00"],
                    c: 1
                },
                {
                    q: "If inflation is 10% per year, what will USD 100 be worth in real terms after one year?",
                    a: ["USD 110", "USD 100", "USD 90", "USD 80"],
                    c: 2
                },
                {
                    q: "You borrow USD 200 at 15% interest per month for 2 months. What's the total interest?",
                    a: ["USD 30", "USD 60", "USD 45", "USD 50"],
                    c: 1
                },
                {
                    q: "A savings account offers 8% annual interest. If you deposit USD 500, how much interest will you earn in 6 months?",
                    a: ["USD 20", "USD 30", "USD 40", "USD 25"],
                    c: 0
                },
                {
                    q: "If you spend 60% of USD 150 on groceries, how much is left?",
                    a: ["USD 60", "USD 70", "USD 50", "USD 80"],
                    c: 0
                },
                {
                    q: "Your monthly income is USD 300. If you save 20%, how much do you save?",
                    a: ["USD 50", "USD 60", "USD 70", "USD 80"],
                    c: 1
                },
                {
                    q: "A product costs ZWL 5,000. With a 15% discount, what's the new price?",
                    a: ["ZWL 4,250", "ZWL 4,500", "ZWL 4,750", "ZWL 4,000"],
                    c: 0
                },
                {
                    q: "If USD 1 = ZWL 900, how many USD is ZWL 4,500?",
                    a: ["USD 4", "USD 5", "USD 6", "USD 3"],
                    c: 1
                },
                {
                    q: "You invest USD 1,000 at 12% annual return. What's the value after 1 year?",
                    a: ["USD 1,100", "USD 1,120", "USD 1,200", "USD 1,150"],
                    c: 1
                },
                {
                    q: "A loan of USD 100 with 10% monthly interest for 3 months costs how much total?",
                    a: ["USD 120", "USD 130", "USD 140", "USD 150"],
                    c: 1
                },
                {
                    q: "If you save USD 5 daily for 30 days, how much do you have?",
                    a: ["USD 100", "USD 120", "USD 150", "USD 180"],
                    c: 2
                },
                {
                    q: "Your budget is USD 200. You spend USD 80 on food, USD 40 on transport. What percentage is left?",
                    a: ["30%", "40%", "50%", "60%"],
                    c: 1
                },
                {
                    q: "An item costs USD 80 after a 20% markup. What was the original price?",
                    a: ["USD 60", "USD 64", "USD 66.67", "USD 70"],
                    c: 2
                },
                {
                    q: "Compound interest on USD 200 at 10% for 2 years is approximately:",
                    a: ["USD 40", "USD 42", "USD 44", "USD 46"],
                    c: 1
                },
                {
                    q: "If you earn USD 500 and pay 15% in expenses, how much is left?",
                    a: ["USD 400", "USD 425", "USD 450", "USD 475"],
                    c: 1
                },
                {
                    q: "A store offers 3 items for USD 30. How much for 5 items?",
                    a: ["USD 45", "USD 50", "USD 40", "USD 55"],
                    c: 1
                },
                {
                    q: "You split USD 120 equally among 4 friends. How much does each get?",
                    a: ["USD 25", "USD 30", "USD 35", "USD 40"],
                    c: 1
                },
                {
                    q: "A monthly subscription is USD 10. How much for a year?",
                    a: ["USD 100", "USD 110", "USD 120", "USD 130"],
                    c: 2
                },
                {
                    q: "If prices increase by 25%, an item costing USD 40 now costs:",
                    a: ["USD 45", "USD 48", "USD 50", "USD 52"],
                    c: 2
                }
            ],
            "current-affairs": [
                {
                    q: "What is Zimbabwe's current multi-currency system primarily based on?",
                    a: ["ZWL only", "USD and ZWL", "Bitcoin", "South African Rand"],
                    c: 1
                },
                {
                    q: "Which mobile money platform is most widely used in Zimbabwe?",
                    a: ["M-Pesa", "EcoCash", "MTN Money", "Airtel Money"],
                    c: 1
                },
                {
                    q: "What does RBZ stand for?",
                    a: ["Reserve Bank of Zimbabwe", "Rural Bank of Zimbabwe", "Retail Bank of Zimbabwe", "Regional Bank of Zimbabwe"],
                    c: 0
                },
                {
                    q: "Which sector contributes most to Zimbabwe's GDP?",
                    a: ["Tourism", "Agriculture", "Mining", "Manufacturing"],
                    c: 2
                },
                {
                    q: "What is Zimbabwe's main export commodity?",
                    a: ["Coffee", "Tobacco", "Gold", "Diamonds"],
                    c: 2
                },
                {
                    q: "The Zimbabwe Stock Exchange is abbreviated as:",
                    a: ["ZSX", "ZSE", "ZIMEX", "ZBSE"],
                    c: 1
                },
                {
                    q: "Which ministry oversees financial policies in Zimbabwe?",
                    a: ["Ministry of Trade", "Ministry of Finance", "Ministry of Economy", "Ministry of Commerce"],
                    c: 1
                },
                {
                    q: "What is the minimum age to open a bank account in Zimbabwe?",
                    a: ["16 years", "18 years", "21 years", "No minimum with guardian"],
                    c: 3
                },
                {
                    q: "Which payment system allows instant bank transfers in Zimbabwe?",
                    a: ["SWIFT", "RTGS", "EFTPOS", "Zipit"],
                    c: 3
                },
                {
                    q: "What does ZIMRA stand for?",
                    a: ["Zimbabwe Revenue Authority", "Zimbabwe Money Reserve Authority", "Zimbabwe Market Research Authority", "Zimbabwe Investment and Revenue Authority"],
                    c: 0
                },
                {
                    q: "Which organization regulates insurance companies in Zimbabwe?",
                    a: ["RBZ", "IPEC", "SECZ", "ZIMRA"],
                    c: 1
                },
                {
                    q: "What is the current VAT rate in Zimbabwe?",
                    a: ["10%", "12.5%", "14.5%", "15%"],
                    c: 3
                },
                {
                    q: "Which bank was the first to introduce mobile banking in Zimbabwe?",
                    a: ["Standard Chartered", "Stanbic Bank", "CBZ Bank", "Barclays Bank"],
                    c: 2
                },
                {
                    q: "What does SME stand for in business?",
                    a: ["Small Medium Enterprise", "Standard Market Economy", "State Managed Entity", "Sectoral Money Enterprise"],
                    c: 0
                },
                {
                    q: "Which platform is used for paying ZESA bills electronically?",
                    a: ["Only bank branches", "Mobile money platforms", "Post office only", "Cash only"],
                    c: 1
                },
                {
                    q: "What is microfinance primarily designed for?",
                    a: ["Large corporations", "Government", "Small businesses and individuals", "International trade"],
                    c: 2
                },
                {
                    q: "Which sector does EMCOZ represent?",
                    a: ["Employers", "Employees", "Economists", "Engineers"],
                    c: 0
                },
                {
                    q: "What is the purpose of NSSA in Zimbabwe?",
                    a: ["Tax collection", "Social security", "Stock exchange", "National statistics"],
                    c: 1
                },
                {
                    q: "Which organization promotes youth entrepreneurship in Zimbabwe?",
                    a: ["CABS", "SEDCO", "ZTA", "ZIA"],
                    c: 1
                },
                {
                    q: "What does KYC mean in banking?",
                    a: ["Keep Your Cash", "Know Your Customer", "Keep Your Card", "Know Your Credit"],
                    c: 1
                }
            ],
            historical: [
                {
                    q: "In which year did Zimbabwe experience hyperinflation?",
                    a: ["2005", "2008", "2010", "2012"],
                    c: 1
                },
                {
                    q: "What was Zimbabwe's currency before dollarization in 2009?",
                    a: ["Zimbabwean Pound", "Zimbabwean Dollar", "Rhodesian Dollar", "RTGS Dollar"],
                    c: 1
                },
                {
                    q: "When did Zimbabwe gain independence?",
                    a: ["1975", "1980", "1985", "1990"],
                    c: 1
                },
                {
                    q: "What replaced the first Zimbabwean dollar in 2006?",
                    a: ["Second Zimbabwean dollar", "USD", "South African Rand", "Bond notes"],
                    c: 0
                },
                {
                    q: "What was the main cause of Zimbabwe's 2008 economic crisis?",
                    a: ["Drought", "Hyperinflation", "War", "Foreign debt"],
                    c: 1
                },
                {
                    q: "When were bond notes introduced in Zimbabwe?",
                    a: ["2014", "2016", "2018", "2019"],
                    c: 1
                },
                {
                    q: "What was the Land Reform Programme primarily aimed at?",
                    a: ["Tourism", "Mining", "Agricultural redistribution", "Urban development"],
                    c: 2
                },
                {
                    q: "Which colonial power ruled Zimbabwe before independence?",
                    a: ["Portugal", "Britain", "Belgium", "France"],
                    c: 1
                },
                {
                    q: "What was Zimbabwe called before independence?",
                    a: ["Zambia", "Rhodesia", "Nyasaland", "Bechuanaland"],
                    c: 1
                },
                {
                    q: "When did EcoCash launch in Zimbabwe?",
                    a: ["2009", "2011", "2013", "2015"],
                    c: 1
                },
                {
                    q: "What economic policy was implemented in 1991?",
                    a: ["ESAP", "MERP", "ZIMPREST", "STERP"],
                    c: 0
                },
                {
                    q: "Which mineral has historically been Zimbabwe's top export?",
                    a: ["Diamonds", "Gold", "Platinum", "Coal"],
                    c: 1
                },
                {
                    q: "When was the Reserve Bank of Zimbabwe established?",
                    a: ["1956", "1965", "1980", "1990"],
                    c: 0
                },
                {
                    q: "What was the highest denomination bank note ever printed in Zimbabwe?",
                    a: ["1 Million", "100 Billion", "100 Trillion", "1 Quadrillion"],
                    c: 2
                },
                {
                    q: "Which economic reform programme followed ESAP?",
                    a: ["ZIMPREST", "STERP", "NDS1", "FTLRP"],
                    c: 0
                },
                {
                    q: "What year did Zimbabwe Stock Exchange start operating?",
                    a: ["1980", "1993", "1996", "2000"],
                    c: 1
                },
                {
                    q: "When did Zimbabwe adopt the multi-currency system?",
                    a: ["2007", "2009", "2011", "2013"],
                    c: 1
                },
                {
                    q: "What was the Zimbabwean dollar's original value against USD at independence?",
                    a: ["Equal", "ZWD was stronger", "USD was stronger", "No exchange rate"],
                    c: 1
                },
                {
                    q: "Which decade saw Zimbabwe's 'Golden Years' economically?",
                    a: ["1970s", "1980s", "1990s", "2000s"],
                    c: 1
                },
                {
                    q: "When was RTGS dollar introduced?",
                    a: ["2017", "2018", "2019", "2020"],
                    c: 2
                }
            ],
            technology: [
                {
                    q: "What technology enables EcoCash transactions?",
                    a: ["Blockchain", "USSD", "Internet only", "Satellite"],
                    c: 1
                },
                {
                    q: "Which code do you dial to access EcoCash menu?",
                    a: ["*151#", "*111#", "*133#", "*123#"],
                    c: 0
                },
                {
                    q: "What does API stand for in fintech?",
                    a: ["Application Programming Interface", "Automated Payment Integration", "Advanced Payment Instrument", "Application Payment Interface"],
                    c: 0
                },
                {
                    q: "Which technology secures online banking?",
                    a: ["HTTP", "HTTPS/SSL", "FTP", "SMTP"],
                    c: 1
                },
                {
                    q: "What is a digital wallet?",
                    a: ["Physical wallet", "Electronic money storage", "Bank vault", "Credit card"],
                    c: 1
                },
                {
                    q: "Which biometric method is common in mobile banking?",
                    a: ["Voice recognition", "Fingerprint", "DNA", "Height measurement"],
                    c: 1
                },
                {
                    q: "What does QR code stand for?",
                    a: ["Quick Response", "Quality Rating", "Question Register", "Quantum Reader"],
                    c: 0
                },
                {
                    q: "Which technology prevents fraudulent transactions?",
                    a: ["OTP (One-Time Password)", "Bluetooth", "WiFi", "GPS"],
                    c: 0
                },
                {
                    q: "What is contactless payment?",
                    a: ["Online shopping", "Phone call payment", "NFC tap payment", "Mail payment"],
                    c: 2
                },
                {
                    q: "Which feature makes mobile money accessible without internet?",
                    a: ["WiFi", "USSD", "Bluetooth", "5G"],
                    c: 1
                },
                {
                    q: "What is two-factor authentication?",
                    a: ["Two passwords", "Password + OTP", "Two banks", "Two cards"],
                    c: 1
                },
                {
                    q: "Which technology records cryptocurrency transactions?",
                    a: ["Database", "Blockchain", "Spreadsheet", "Cloud"],
                    c: 1
                },
                {
                    q: "What does POS stand for in payments?",
                    a: ["Point of Sale", "Payment Online System", "Personal Operation Service", "Public Order System"],
                    c: 0
                },
                {
                    q: "Which app feature allows bill payment reminders?",
                    a: ["Calculator", "Calendar", "Push notifications", "Camera"],
                    c: 2
                },
                {
                    q: "What is phishing in digital banking?",
                    a: ["Fishing game", "Fraudulent information theft", "Password recovery", "Account closure"],
                    c: 1
                },
                {
                    q: "Which technology enables instant person-to-person transfers?",
                    a: ["Email", "Mobile money platforms", "Fax", "Letter"],
                    c: 1
                },
                {
                    q: "What is end-to-end encryption?",
                    a: ["Slow processing", "Security from sender to receiver", "Account termination", "Password sharing"],
                    c: 1
                },
                {
                    q: "Which feature helps track spending patterns?",
                    a: ["Camera", "Transaction history", "Calculator", "Map"],
                    c: 1
                },
                {
                    q: "What is a virtual card?",
                    a: ["Plastic card", "Digital card number for online use", "ATM card", "ID card"],
                    c: 1
                },
                {
                    q: "Which technology powers most ATMs?",
                    a: ["Solar only", "Computer systems", "Manual operation", "Wind power"],
                    c: 1
                }
            ],
            literacy: [
                {
                    q: "What is a budget?",
                    a: ["A loan", "A plan for spending money", "A type of tax", "A savings account"],
                    c: 1
                },
                {
                    q: "What does 'interest' mean in banking?",
                    a: ["Curiosity", "Cost of borrowing or return on saving", "Bank fee", "Account type"],
                    c: 1
                },
                {
                    q: "What is an emergency fund?",
                    a: ["Investment portfolio", "Money for unexpected expenses", "Retirement savings", "Loan facility"],
                    c: 1
                },
                {
                    q: "What does APR stand for?",
                    a: ["Annual Payment Rate", "Annual Percentage Rate", "Account Payment Return", "Annual Principal Return"],
                    c: 1
                },
                {
                    q: "What is compound interest?",
                    a: ["Simple multiplication", "Interest on interest", "One-time payment", "Bank charge"],
                    c: 1
                },
                {
                    q: "What is a credit score?",
                    a: ["Bank balance", "Measure of creditworthiness", "Loan amount", "Interest rate"],
                    c: 1
                },
                {
                    q: "What does diversification mean in investing?",
                    a: ["Putting all money in one place", "Spreading investments across different assets", "Saving only", "Borrowing"],
                    c: 1
                },
                {
                    q: "What is inflation?",
                    a: ["Price decrease", "General increase in prices", "Interest rate", "Exchange rate"],
                    c: 1
                },
                {
                    q: "What is a liability?",
                    a: ["Asset", "Something you own", "Something you owe", "Income"],
                    c: 2
                },
                {
                    q: "What is net worth?",
                    a: ["Monthly income", "Total assets minus liabilities", "Bank balance", "Credit limit"],
                    c: 1
                },
                {
                    q: "What does ROI mean?",
                    a: ["Rate of Income", "Return on Investment", "Risk of Investment", "Rule of Interest"],
                    c: 1
                },
                {
                    q: "What is passive income?",
                    a: ["Salary", "Money earned without active work", "Loan", "Expense"],
                    c: 1
                },
                {
                    q: "What is a pension?",
                    a: ["Current salary", "Retirement savings", "Loan type", "Investment"],
                    c: 1
                },
                {
                    q: "What does liquidity mean?",
                    a: ["Water content", "How easily assets convert to cash", "Interest rate", "Loan term"],
                    c: 1
                },
                {
                    q: "What is a mortgage?",
                    a: ["Car loan", "Property loan", "Personal loan", "Business loan"],
                    c: 1
                },
                {
                    q: "What is insurance?",
                    a: ["Guarantee", "Protection against financial loss", "Savings plan", "Investment"],
                    c: 1
                },
                {
                    q: "What does principal mean in a loan?",
                    a: ["Interest", "Original borrowed amount", "Monthly payment", "Total repayment"],
                    c: 1
                },
                {
                    q: "What is a dividend?",
                    a: ["Tax payment", "Share of company profits", "Loan interest", "Bank fee"],
                    c: 1
                },
                {
                    q: "What is collateral?",
                    a: ["Interest rate", "Asset pledged for a loan", "Monthly payment", "Credit score"],
                    c: 1
                },
                {
                    q: "What is financial literacy?",
                    a: ["Reading ability", "Understanding money management", "Math skills", "Computer skills"],
                    c: 1
                }
            ]
        };

        // Chat Flow
        const chatFlow = [
            {
                bot: "Hello! üëã Welcome to Mupfumi Financial Chat. I'm here to help you learn about managing money. Are you ready to start?",
                prompt: "RESPOND WITH: YES or NO",
                options: ["YES", "NO"],
                responses: {
                    "YES": "Great! Let's begin your financial journey.",
                    "NO": "No problem! Take your time. When you're ready, we can start with some basics about saving money."
                }
            },
            {
                bot: "Let's start with savings. Do you currently save any money regularly?",
                prompt: "RESPOND WITH: YES, NO, or SOMETIMES",
                options: ["YES", "NO", "SOMETIMES"],
                responses: {
                    "YES": "That's excellent! Building a saving habit early is one of the best financial decisions you can make.",
                    "NO": "That's okay! Many people struggle with saving. The good news is it's never too late to start.",
                    "SOMETIMES": "That's a good start! Consistency is key, but saving even occasionally is better than not saving at all."
                }
            },
            {
                bot: "Do you have any financial goals for the next year?",
                prompt: "RESPOND WITH: YES, NO, or NOT SURE",
                options: ["YES", "NO", "NOT SURE"],
                responses: {
                    "YES": "Excellent! Having goals gives purpose to your financial efforts. Write them down and review them regularly.",
                    "NO": "That's okay! Let me suggest starting with a simple goal: building a small emergency fund of at least one month's expenses.",
                    "NOT SURE": "That's honest! Financial goals can be saving for education, starting a business, or building an emergency fund."
                }
            },
            {
                bot: "Would you like to learn more about investing your money?",
                prompt: "RESPOND WITH: YES, NO, or MAYBE LATER",
                options: ["YES", "NO", "MAYBE LATER"],
                responses: {
                    "YES": "Great interest! Remember: never invest money you can't afford to lose. Start with understanding different investment types.",
                    "NO": "That's fine! Focus on building savings first. Investing comes after you have a solid financial foundation.",
                    "MAYBE LATER": "Smart approach! Master saving and budgeting first, then explore investing when you're ready."
                }
            },
            {
                bot: "Do you understand the concept of compound interest?",
                prompt: "RESPOND WITH: YES, NO, or SOMEWHAT",
                options: ["YES", "NO", "SOMEWHAT"],
                responses: {
                    "YES": "Fantastic! Compound interest is your friend when saving and investing, but your enemy when borrowing.",
                    "NO": "No problem! Compound interest means earning interest on your interest - it's how small savings grow big over time.",
                    "SOMEWHAT": "Let me clarify: If you save USD 100 at 10% yearly, year 1 you get USD 10. Year 2, you earn interest on USD 110!"
                }
            },
            {
                bot: "Have you ever borrowed money or taken a loan?",
                prompt: "RESPOND WITH: YES or NO",
                options: ["YES", "NO"],
                responses: {
                    "YES": "Borrowing can be useful, but always understand the total cost. Make sure you can comfortably afford repayments.",
                    "NO": "That's prudent! If you ever need to borrow, always compare options and calculate the total cost before accepting."
                }
            },
            {
                bot: "You're doing great! One final question: Will you commit to improving your financial literacy?",
                prompt: "RESPOND WITH: YES, DEFINITELY, or I'LL TRY",
                options: ["YES", "DEFINITELY", "I'LL TRY"],
                responses: {
                    "YES": "Wonderful commitment! Remember: small steps lead to big changes. Keep learning and practicing.",
                    "DEFINITELY": "That's the spirit! Your future self will thank you for the financial knowledge you're building today.",
                    "I'LL TRY": "Trying is the first step! Be patient with yourself. Financial literacy is a journey, not a destination."
                }
            },
            {
                bot: "Thank you for chatting with me! üéâ Remember these key points: Save regularly, budget wisely, avoid unnecessary debt, and keep learning. Would you like to explore other features of Mupfumi?",
                prompt: "RESPOND WITH: PLAY GAME, READ MORE, or FINISH",
                options: ["PLAY GAME", "READ MORE", "FINISH"],
                responses: {
                    "PLAY GAME": "Great choice! Let's test your knowledge with a fun quiz.",
                    "READ MORE": "Excellent! Reading more will deepen your understanding.",
                    "FINISH": "Thank you for using Mupfumi! Come back anytime to continue your financial literacy journey."
                }
            }
        ];

        // Recommendations pool
        const recommendations = [
            "üìö Focus on budgeting basics. Try the 50-30-20 rule: 50% needs, 30% wants, 20% savings.",
            "üí™ Great effort! To improve further, practice with real-world financial scenarios daily.",
            "üéØ Consider reviewing topics you found challenging. Repetition builds mastery.",
            "‚≠ê Excellent work! Challenge yourself with more advanced financial concepts.",
            "üìà Keep learning! Financial literacy is a journey. Review material on compound interest and savings.",
            "üî• Outstanding! You're ready for more complex topics like investment and portfolio management.",
            "üí° Good start! Spend time understanding Zimbabwe's economic environment and how it affects personal finance.",
            "üåü Well done! Consider applying what you've learned by creating a personal budget this week.",
            "üìä Review the questions you missed. Understanding your mistakes is key to improvement.",
            "üéì Strong performance! Help others by sharing what you've learned with friends and family.",
            "üí∞ Focus on practical application. Try tracking your expenses for one month.",
            "üöÄ Amazing! You're building a strong financial foundation. Keep up the momentum!",
            "üìù Take time to write down your financial goals and create an action plan.",
            "üèÜ Impressive! Consider exploring advanced topics like stocks and bonds.",
            "üå± Every expert was once a beginner. Keep practicing and you'll see improvement.",
            "üí∏ Remember: financial literacy leads to financial freedom. Stay committed!",
            "üéØ Set specific, measurable financial goals and work towards them systematically.",
            "‚ö° Speed isn't everything. Take time to understand each concept thoroughly.",
            "üåç Apply your knowledge to real Zimbabwe economic situations for better understanding.",
            "‚ú® You're on the right path! Consistency is more important than perfection."
        ];

        // Utility Functions
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        function shuffleArray(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        function getRandomRecommendation(score) {
            if (score >= 9) {
                return recommendations[Math.floor(Math.random() * 4) + 3];
            } else if (score >= 7) {
                return recommendations[Math.floor(Math.random() * 5) + 7];
            } else if (score >= 5) {
                return recommendations[Math.floor(Math.random() * 4) + 12];
            } else {
                return recommendations[Math.floor(Math.random() * 4)];
            }
        }

        function saveToLocalStorage(key, data) {
            try {
                localStorage.setItem(key, JSON.stringify(data));
            } catch (e) {
                console.error('Error saving to localStorage:', e);
            }
        }

        function getFromLocalStorage(key) {
            try {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : null;
            } catch (e) {
                console.error('Error reading from localStorage:', e);
                return null;
            }
        }

        // Game Functions
        function startGame(category) {
            gameState.category = category;
            const allQuestions = questionBanks[category];
            gameState.questions = shuffleArray(allQuestions).slice(0, 10);
            gameState.currentIndex = 0;
            gameState.answers = {};
            gameState.startTime = Date.now();
            
            document.getElementById('gameTitle').textContent = getCategoryName(category);
            
            showScreen('gameScreen');
            displayQuestion();
            startTimer();
        }

        function getCategoryName(category) {
            const names = {
                'mathematics': 'Mathematics Quiz',
                'current-affairs': 'Current Affairs Quiz',
                'historical': 'Economic History Quiz',
                'technology': 'Financial Technology Quiz',
                'literacy': 'Financial Literacy Quiz'
            };
            return names[category] || 'Quiz';
        }

        function displayQuestion() {
            const q = gameState.questions[gameState.currentIndex];
            const idx = gameState.currentIndex;
            
            document.getElementById('currentQ').textContent = idx + 1;
            document.getElementById('totalQ').textContent = gameState.questions.length;
            document.getElementById('questionNum').textContent = `Question ${idx + 1} of ${gameState.questions.length}`;
            document.getElementById('questionText').textContent = q.q;
            
            const answersHtml = q.a.map((answer, i) => {
                const selected = gameState.answers[idx] === i ? ' selected' : '';
                return `<div class="answer-option${selected}" onclick="selectAnswer(${i})">${answer}</div>`;
            }).join('');
            
            document.getElementById('answersContainer').innerHTML = answersHtml;
            
            document.getElementById('prevBtn').disabled = idx === 0;
            updateAnsweredCount();
        }

        function selectAnswer(answerIndex) {
            gameState.answers[gameState.currentIndex] = answerIndex;
            displayQuestion();
        }

        function updateAnsweredCount() {
            const answered = Object.keys(gameState.answers).length;
            document.getElementById('answered').textContent = answered;
        }

        function previousQuestion() {
            if (gameState.currentIndex > 0) {
                gameState.currentIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (gameState.currentIndex < gameState.questions.length - 1) {
                gameState.currentIndex++;
                displayQuestion();
            }
        }

        function startTimer() {
            if (gameState.timerInterval) clearInterval(gameState.timerInterval);
            
            gameState.timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
                const remaining = gameState.timeLimit - elapsed;
                
                if (remaining <= 0) {
                    clearInterval(gameState.timerInterval);
                    finishGame();
                    return;
                }
                
                const minutes = Math.floor(remaining / 60);
                const seconds = remaining % 60;
                document.getElementById('timer').textContent = 
                    `‚è±Ô∏è Time: ${minutes}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function confirmQuitGame() {
            if (confirm('Are you sure you want to quit? Your progress will be lost.')) {
                if (gameState.timerInterval) clearInterval(gameState.timerInterval);
                showScreen('categoryScreen');
            }
        }

        function finishGame() {
            if (gameState.timerInterval) clearInterval(gameState.timerInterval);
            
            let correct = 0;
            let wrong = 0;
            let unanswered = 0;
            
            gameState.questions.forEach((q, idx) => {
                if (gameState.answers[idx] === undefined) {
                    unanswered++;
                } else if (gameState.answers[idx] === q.c) {
                    correct++;
                } else {
                    wrong++;
                }
            });
            
            const score = correct;
            const total = gameState.questions.length;
            const percentage = Math.round((correct / total) * 100);
            
            // Save result
            const result = {
                category: gameState.category,
                score: correct,
                total: total,
                percentage: percentage,
                date: new Date().toISOString()
            };
            
            let history = getFromLocalStorage('gameHistory') || [];
            history.push(result);
            saveToLocalStorage('gameHistory', history);
            
            // Display results
            displayResults(correct, wrong, unanswered, total);
        }

        function displayResults(correct, wrong, unanswered, total) {
            const percentage = Math.round((correct / total) * 100);
            
            // Icon and title based on performance
            let icon = 'üéâ';
            let title = 'Great Job!';
            
            if (percentage >= 90) {
                icon = 'üèÜ';
                title = 'Outstanding!';
            } else if (percentage >= 70) {
                icon = '‚≠ê';
                title = 'Well Done!';
            } else if (percentage >= 50) {
                icon = 'üëç';
                title = 'Good Effort!';
            } else {
                icon = 'üìö';
                title = 'Keep Learning!';
            }
            
            document.getElementById('resultIcon').textContent = icon;
            document.getElementById('resultTitle').textContent = title;
            document.getElementById('finalScore').textContent = `${correct}/${total}`;
            document.getElementById('resultMessage').textContent = 
                `You answered ${correct} questions correctly (${percentage}%)`;
            
            // Chart
            const chartHtml = `
                <div class="bar" style="height: ${(correct/total)*100}%">
                    <div class="bar-value">${correct}</div>
                    <div class="bar-label">Correct</div>
                </div>
                <div class="bar" style="height: ${(wrong/total)*100}%; background: linear-gradient(to top, #EF4444, #F59E0B)">
                    <div class="bar-value">${wrong}</div>
                    <div class="bar-label">Wrong</div>
                </div>
                <div class="bar" style="height: ${(unanswered/total)*100}%; background: linear-gradient(to top, #6B7280, #9CA3AF)">
                    <div class="bar-value">${unanswered}</div>
                    <div class="bar-label">Skipped</div>
                </div>
            `;
            document.getElementById('chart').innerHTML = chartHtml;
            
            // Recommendation
            document.getElementById('recommendationText').textContent = getRandomRecommendation(correct);
            
            showScreen('resultsScreen');
        }

        // Chat Functions
        function initChat() {
            chatState.step = 0;
            chatState.history = [];
            
            const messages = document.getElementById('chatMessages');
            messages.innerHTML = '';
            
            showScreen('chatScreen');
            addBotMessage(chatFlow[0].bot, chatFlow[0].prompt, chatFlow[0].options);
        }

        function addBotMessage(text, prompt = '', options = []) {
            const messages = document.getElementById('chatMessages');
            const msgDiv = document.createElement('div');
            msgDiv.className = 'chat-message bot';
            msgDiv.innerHTML = `${text}${prompt ? `<div class="prompt">${prompt}</div>` : ''}`;
            messages.appendChild(msgDiv);
            messages.scrollTop = messages.scrollHeight;
            
            if (options.length > 0) {
                showChatOptions(options);
            }
        }

        function addUserMessage(text) {
            const messages = document.getElementById('chatMessages');
            const msgDiv = document.createElement('div');
            msgDiv.className = 'chat-message user';
            msgDiv.textContent = text;
            messages.appendChild(msgDiv);
            messages.scrollTop = messages.scrollHeight;
        }

        function showChatOptions(options) {
            const container = document.getElementById('chatOptions');
            container.innerHTML = options.map(opt => 
                `<button class="chat-option" onclick="selectChatOption('${opt}')">${opt}</button>`
            ).join('');
        }

        function selectChatOption(option) {
            addUserMessage(option);
            document.getElementById('chatOptions').innerHTML = '';
            
            const currentFlow = chatFlow[chatState.step];
            const response = currentFlow.responses[option];
            
            if (response) {
                setTimeout(() => {
                    addBotMessage(response);
                    
                    setTimeout(() => {
                        chatState.step++;
                        
                        if (chatState.step < chatFlow.length) {
                            const nextFlow = chatFlow[chatState.step];
                            addBotMessage(nextFlow.bot, nextFlow.prompt, nextFlow.options);
                        } else {
                            // Chat completed
                            if (option === 'PLAY GAME') {
                                setTimeout(() => showScreen('categoryScreen'), 1500);
                            } else if (option === 'READ MORE') {
                                setTimeout(() => showScreen('learningScreen'), 1500);
                            } else {
                                setTimeout(() => showScreen('modeScreen'), 2000);
                            }
                        }
                    }, 800);
                }, 600);
            }
            
            // Save chat history
            chatState.history.push({ user: option, bot: response });
            saveToLocalStorage('chatHistory', chatState.history);
        }

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                addUserMessage(message);
                input.value = '';
                
                // Simple response logic
                setTimeout(() => {
                    addBotMessage("Thank you for sharing! Financial literacy is a journey. Keep learning and applying what you know.");
                }, 600);
            }
        }

        // Initialize on load
        window.addEventListener('load', () => {
            // Check if returning user
            const history = getFromLocalStorage('gameHistory');
            if (history && history.length > 0) {
                console.log('Welcome back! You have played', history.length, 'games.');
            }
        });

        // Handle Enter key in chat
        document.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && document.getElementById('chatScreen').classList.contains('active')) {
                sendChatMessage();
            }
        });
    </script>
</body>
</html> 